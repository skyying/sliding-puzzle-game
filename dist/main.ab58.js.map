{"version":3,"sources":["webpack:///./src/components/helper.js","webpack:///./src/components/config.js","webpack:///./src/components/game.js","webpack:///./src/components/rank.js","webpack:///./src/index.js"],"names":["getRandomInt","min","max","Math","floor","random","SlidingGameConfig","game","Game","props","_classCallCheck","this","_this","_possibleConstructorReturn","__proto__","Object","getPrototypeOf","call","state","playerName","puzzle","step","isWin","isGameStart","emptyPiece","handleName","bind","movePiece","shuffle","isAnswerCorrect","checkPossibleMove","swapPiece","startGame","goEasyMode","react_default","a","Component","e","setState","currentTarget","value","targetIndex","emptyIndex","findIndex","piece","swappedPuzzle","slice","targetPiece","player","name","updateRanking","_this2","abs","swapTimes","Array","from","length","fill","map","index","i","randomIndex","prev","current","filter","mode","_this3","num","createElement","key","onClick","disable","onChange","disabled","placeholder","className","rank","Rank","rank_classCallCheck","rank_possibleConstructorReturn","rankData","JSON","parse","localStorage","getItem","rankList","src_App","App","src_classCallCheck","src_possibleConstructorReturn","ranking","tab","window","location","pathname","playerData","push","sort","b","setItem","stringify","BrowserRouter","Link","to","Switch","Route","path","render","exact","react_dom_default","document","getElementById"],"mappings":"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","file":"main.ab58.js","sourcesContent":["export const getRandomInt = (min, max) => {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n};\n","export const SlidingGameConfig = {\n  blocks: 9 \n};\n\nexport const getCorrectPuzzle = () => {\n  return Array.from({length: 9})\n    .fill(0)\n    .map((piece, index) => index);\n};\n","import React from \"react\";\nimport {getRandomInt} from \"../components/helper.js\";\nimport {SlidingGameConfig, getCorrectPuzzle} from \"../components/config.js\";\n\nexport default class Game extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      playerName: \"\",\n      puzzle: [1, 2, 3, 4, 5, 6, 7, 0, 8],\n      step: 0,\n      isWin: false,\n      isGameStart: false\n    };\n    this.emptyPiece = 0;\n    this.handleName = this.handleName.bind(this);\n    this.movePiece = this.movePiece.bind(this);\n    this.shuffle = this.shuffle.bind(this);\n    this.isAnswerCorrect = this.isAnswerCorrect.bind(this);\n    this.checkPossibleMove = this.checkPossibleMove.bind(this);\n    this.swapPiece = this.swapPiece.bind(this);\n    this.startGame = this.startGame.bind(this);\n    this.goEasyMode = this.goEasyMode.bind(this);\n  }\n  handleName(e) {\n    this.setState({playerName: e.currentTarget.value});\n  }\n  movePiece(targetIndex) {\n    let emptyIndex = this.state.puzzle.findIndex(piece => piece === 0);\n\n    // base case\n    if (targetIndex === emptyIndex) return;\n\n    if (this.checkPossibleMove(targetIndex)) {\n      this.swapPiece(targetIndex, emptyIndex);\n    }\n  }\n  swapPiece(targetIndex, emptyIndex) {\n    let swappedPuzzle = this.state.puzzle.slice(0),\n      targetPiece = swappedPuzzle[targetIndex];\n\n    // swap those two pieces\n    swappedPuzzle[emptyIndex] = targetPiece;\n    swappedPuzzle[targetIndex] = this.emptyPiece;\n\n    // check if answer is correct after swapped\n    if (this.isAnswerCorrect(swappedPuzzle)) {\n      this.setState({isWin: true, isGameStart: false});\n      let player = {};\n      player.name = this.state.playerName;\n      player.step = this.state.step + 1;\n      this.props.updateRanking(player);\n    }\n\n    this.setState({puzzle: swappedPuzzle, step: this.state.step + 1});\n  }\n  checkPossibleMove(targetIndex) {\n    let emptyIndex = this.state.puzzle.findIndex(\n      piece => piece === this.emptyPiece,\n    );\n\n    let boardRowNum = 3;\n\n    // check if in same row, then check if in the same column;\n    // piece in the same column should have same remaining, in the same row should have\n    // same quotient\n    return (\n      (Math.abs(targetIndex - emptyIndex) === boardRowNum &&\n                targetIndex % boardRowNum === emptyIndex % boardRowNum) ||\n            (Math.abs(targetIndex - emptyIndex) === 1 &&\n                Math.floor(targetIndex / boardRowNum) ===\n                    Math.floor(emptyIndex / boardRowNum))\n    );\n  }\n  shuffle() {\n    let shuffleTimes = 1000;\n\n    // make sure they are swapped even times\n    let swapTimes = Math.floor(Math.random() * shuffleTimes) * 2,\n      puzzle = getCorrectPuzzle(),\n      i = 0;\n\n    while (i < swapTimes) {\n      // handle swap boundary;\n      let randomIndex = getRandomInt(1, SlidingGameConfig.blocks - 1);\n      let prev = puzzle[randomIndex - 1],\n        current = puzzle[randomIndex];\n\n      // swap two adjacent piece\n      puzzle[randomIndex] = prev;\n      puzzle[randomIndex - 1] = current;\n\n      i++;\n    }\n    this.setState({puzzle: puzzle});\n  }\n  isAnswerCorrect(puzzle) {\n    return (\n      puzzle.slice(0, 8).filter((piece, index) => +piece !== index + 1)\n        .length === 0\n    );\n  }\n  startGame(mode) {\n    this.setState({isGameStart: true, isWin: false, step: 0});\n    if (mode === \"easy\") {\n      this.goEasyMode();\n    } else {\n      this.shuffle();\n    }\n  }\n  goEasyMode() {\n    this.setState({puzzle: [1, 2, 3, 4, 5, 6, 7, 0, 8]});\n  }\n\n  render() {\n    let puzzle = this.state.puzzle.map((num, index) => (\n      <div key={index} onClick={() => this.movePiece(index)}>\n        <span> {num !== 0 ? num : \"\"} </span>\n      </div>\n    ));\n    let disable = !this.state.playerName.length || this.state.isGameStart;\n    return (\n      <div>\n        <input\n          value={this.state.playerName}\n          onChange={this.handleName}\n          disabled={this.state.isGameStart}\n          placeholder=\"You name\"\n        />\n        <button\n          disabled={disable}\n          onClick={() => this.startGame(\"hard\")}>\n                    Start\n        </button>\n        <button\n          disabled={disable}\n          onClick={() => this.startGame(\"easy\")}>\n                    Easy\n        </button>\n\n        <div className=\"step\">Step: {this.state.step}</div>\n        <section className={this.state.isGameStart ? \"game-on\" : \"\"}>\n          <div className=\"puzzle\"> {puzzle}</div>\n          <div className=\"overlay\"> </div>\n\n          <div className={this.state.isWin ? \"ko\" : \"not-ko\"}>\n            <div className=\"ko-wrapper\">\n              <div className=\"large\">KO</div>\n              <div>去看看你的排名吧</div>\n            </div>\n          </div>\n        </section>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport {Link} from \"react-router-dom\";\n\nexport default class Rank extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n  render() {\n    let rankData = JSON.parse(localStorage.getItem(\"rank\")) || [];\n    let rankList = rankData.map((player, index) => {\n      return (\n        <div className=\"player-row\" key={index}>\n          <div>{index + 1}</div>\n          <div>{player.name}</div>\n          <div>{player.step}</div>\n        </div>\n      );\n    });\n    if (!rankData.length) {\n      return <div>還沒有人來玩也</div>;\n    }\n    return (\n      <div>\n        <div className=\"player-row\">\n          <div>Rank </div>\n          <div>Name</div> <div>Step</div>\n        </div>\n        {rankList}\n      </div>\n    );\n  }\n}\n","import \"./style/main.scss\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {BrowserRouter, Link, Route, Switch} from \"react-router-dom\";\nimport Game from \"./components/game.js\";\nimport Rank from \"./components/rank.js\";\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      ranking: [],\n      tab: window.location.pathname\n    };\n    this.updateRanking = this.updateRanking.bind(this);\n  }\n  updateRanking(playerData) {\n    if (!playerData) return;\n\n    let localStorage = window.localStorage,\n      rankData = JSON.parse(localStorage.getItem(\"rank\"));\n\n    if (!rankData) {\n      rankData = [playerData];\n    } else {\n      rankData.push(playerData);\n      rankData.sort((a, b) =>   +a[\"step\"] - +b[\"step\"] );\n    }\n    localStorage.setItem(\"rank\", JSON.stringify(rankData));\n  }\n  updateState(state) {\n    this.setState(state);\n  }\n\n  render() {\n    return (\n      <main>\n        <BrowserRouter>\n          <div>\n            <div className=\"tab\">\n              <Link\n                onClick={() => this.setState({tab: \"/\"})}\n                className={\n                  this.state.tab === \"/\" ? \"active\" : \"\"\n                }\n                to=\"/\">\n                                Game\n              </Link>\n              <Link\n                onClick={() => this.setState({tab: \"/rank\"})}\n                className={\n                  this.state.tab === \"/rank\" ? \"active\" : \"\"\n                }\n                to=\"/rank\">\n                                Rank\n              </Link>\n            </div>\n            <Switch>\n              <Route\n                path=\"/\"\n                render={() => (\n                  <Game updateRanking={this.updateRanking} />\n                )}\n                exact\n              />\n              <Route\n                path=\"/rank\"\n                exact\n                render={props => <Rank {...props} />}\n              />\n            </Switch>\n          </div>\n        </BrowserRouter>\n      </main>\n    );\n  }\n}\n\nReactDOM.render(<App />, document.getElementById(\"main\"));\n"],"sourceRoot":""}