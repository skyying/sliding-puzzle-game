(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);n(11);var a=n(0),r=n.n(a),i=n(8),o=n.n(i),l=n(22),s=n(21),c=n(24),u=n(23),f=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},p=9,m=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={playerName:"",puzzle:[1,2,3,4,5,6,7,0,8],step:0,isWin:!1,isGameStart:!1},n.emptyPiece=0,n.handleName=n.handleName.bind(n),n.movePiece=n.movePiece.bind(n),n.shuffle=n.shuffle.bind(n),n.isAnswerCorrect=n.isAnswerCorrect.bind(n),n.checkPossibleMove=n.checkPossibleMove.bind(n),n.swapPiece=n.swapPiece.bind(n),n.startGame=n.startGame.bind(n),n.goEasyMode=n.goEasyMode.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),m(t,[{key:"handleName",value:function(e){this.setState({playerName:e.currentTarget.value})}},{key:"movePiece",value:function(e){var t=this.state.puzzle.findIndex(function(e){return 0===e});e!==t&&this.checkPossibleMove(e)&&this.swapPiece(e,t)}},{key:"swapPiece",value:function(e,t){var n=this.state.puzzle.slice(0),a=n[e];if(n[t]=a,n[e]=this.emptyPiece,this.isAnswerCorrect(n)){this.setState({isWin:!0,isGameStart:!1});var r={};r.name=this.state.playerName,r.step=this.state.step+1,this.props.updateRanking(r)}this.setState({puzzle:n,step:this.state.step+1})}},{key:"checkPossibleMove",value:function(e){var t=this,n=this.state.puzzle.findIndex(function(e){return e===t.emptyPiece});return 3===Math.abs(e-n)&&e%3==n%3||1===Math.abs(e-n)&&Math.floor(e/3)===Math.floor(n/3)}},{key:"shuffle",value:function(){for(var e=2*Math.floor(1e3*Math.random()),t=Array.from({length:9}).fill(0).map(function(e,t){return t}),n=0;n<e;){var a=f(1,p-1),r=t[a-1],i=t[a];t[a]=r,t[a-1]=i,n++}this.setState({puzzle:t})}},{key:"isAnswerCorrect",value:function(e){return 0===e.slice(0,8).filter(function(e,t){return+e!==t+1}).length}},{key:"startGame",value:function(e){this.setState({isGameStart:!0,isWin:!1,step:0}),"easy"===e?this.goEasyMode():this.shuffle()}},{key:"goEasyMode",value:function(){this.setState({puzzle:[1,2,3,4,5,6,7,0,8]})}},{key:"render",value:function(){var e=this,t=this.state.puzzle.map(function(t,n){return r.a.createElement("div",{key:n,onClick:function(){return e.movePiece(n)}},r.a.createElement("span",null," ",0!==t?t:""," "))}),n=!this.state.playerName.length||this.state.isGameStart;return r.a.createElement("div",null,r.a.createElement("input",{value:this.state.playerName,onChange:this.handleName,disabled:this.state.isGameStart,placeholder:"You name"}),r.a.createElement("button",{disabled:n,onClick:function(){return e.startGame("hard")}},"Start"),r.a.createElement("button",{disabled:n,onClick:function(){return e.startGame("easy")}},"Easy"),r.a.createElement("div",{className:"step"},"Step: ",this.state.step),r.a.createElement("section",{className:this.state.isGameStart?"game-on":""},r.a.createElement("div",{className:"puzzle"}," ",t),r.a.createElement("div",{className:"overlay"}," "),r.a.createElement("div",{className:this.state.isWin?"ko":"not-ko"},r.a.createElement("div",{className:"ko-wrapper"},r.a.createElement("div",{className:"large"},"KO"),r.a.createElement("div",null,"去看看你的排名吧")))))}}]),t}(),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var y=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),d(t,[{key:"render",value:function(){var e=JSON.parse(localStorage.getItem("rank"))||[],t=e.map(function(e,t){return r.a.createElement("div",{className:"player-row",key:t},r.a.createElement("div",null,t+1),r.a.createElement("div",null,e.name),r.a.createElement("div",null,e.step))});return e.length?r.a.createElement("div",null,r.a.createElement("div",{className:"player-row"},r.a.createElement("div",null,"Rank "),r.a.createElement("div",null,"Name")," ",r.a.createElement("div",null,"Step")),t):r.a.createElement("div",null,"還沒有人來玩也")}}]),t}(),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var v=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={ranking:[],tab:window.location.pathname},n.updateRanking=n.updateRanking.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),b(t,[{key:"updateRanking",value:function(e){if(e){var t=window.localStorage,n=JSON.parse(t.getItem("rank"));n?(n.push(e),n.sort(function(e,t){return+e.step-+t.step})):n=[e],t.setItem("rank",JSON.stringify(n))}}},{key:"updateState",value:function(e){this.setState(e)}},{key:"render",value:function(){var e=this;return r.a.createElement("main",null,r.a.createElement(l.a,null,r.a.createElement("div",null,r.a.createElement("div",{className:"tab"},r.a.createElement(s.a,{onClick:function(){return e.setState({tab:"/"})},className:"/"===this.state.tab?"active":"",to:"/"},"Game"),r.a.createElement(s.a,{onClick:function(){return e.setState({tab:"/rank"})},className:"/rank"===this.state.tab?"active":"",to:"/rank"},"Rank")),r.a.createElement(c.a,null,r.a.createElement(u.a,{path:"/",render:function(){return r.a.createElement(h,{updateRanking:e.updateRanking})},exact:!0}),r.a.createElement(u.a,{path:"/rank",exact:!0,render:function(e){return r.a.createElement(y,e)}})))))}}]),t}();o.a.render(r.a.createElement(v,null),document.getElementById("main"))}},[[20,2,1]]]);
//# sourceMappingURL=main.ab58.js.map